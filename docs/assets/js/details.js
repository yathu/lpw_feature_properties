$(document).ready(()=>{$(".spec-grid").masonry({itemSelector:".spec-grid-item"}),$(".menuContainer .swiper-slide").on("click",function(e){e.preventDefault();e=$(this).attr("href"),e=$(e);$("html,body").animate({scrollTop:e.offset().top-80})}),$(".copyUrl").on("click",function(){navigator.clipboard.writeText(window.location.href)}),document.querySelector(".nativeShare").addEventListener("click",e=>{var n;navigator.share?(n=$("#propertyTitle").text(),navigator.share({title:n,url:window.location.href}).then(()=>{console.log("Thanks for sharing!")}).catch(e=>{console.log("Error while using Web share API:"),console.log(e)})):console.log("browser not supported...")});var l=new Intl.NumberFormat("en-US",{style:"currency",currency:"LKR",currencyDisplay:"symbol",minimumFractionDigits:0}),t=($(".dropdown-toggle").dropdown(),$(".banner-img-container #love").on("click",function(){$(this).toggleClass("active")}),$("#contactNum").on("click",function(){$("#showEnquireNum").trigger("click")}),jQuery.validator.setDefaults({onfocusout:function(e){this.element(e)},onkeyup:!1,highlight:function(e){},unhighlight:function(e){},errorElement:"div",errorClass:"invalid-feedback",errorPlacement:function(e,n){n.parent(".input-group-prepend").length?$(n).siblings(".invalid-feedback").append(e):e.insertAfter(n)}}),$("#loanForm"));t.validate({rules:{purpose:{required:!0},fullname:{required:!0},living_place:{required:!0},loanPhone:{required:!0,number:!0},loanEmail:{required:!0}}}),$("#details_popup_form").validate({rules:{initName:{required:!0},initPhoneNo:{required:!0,number:!0},initEmail1:{required:!0,email:!0},termsCheck:{required:!0}},highlight:function(e){$(e).removeClass("is-valid").addClass("is-invalid")},unhighlight:function(e){$(e).removeClass("is-invalid").addClass("is-valid")}}),$("#enqForm").validate({rules:{inqName:{required:!0},inqContact:{required:!0,number:!0},inqEmail:{required:!0,email:!0},enqTerms:{required:!0}},highlight:function(e){$(e).removeClass("is-valid").addClass("is-invalid")},unhighlight:function(e){$(e).removeClass("is-invalid").addClass("is-valid")}}),t.children("div").steps({headerTag:"h3",bodyTag:"section",titleTemplate:'<span class="number">#index#</span>',transitionEffect:"slideLeft",onStepChanging:function(e,n,i){return t.validate().settings.ignore=":disabled,:hidden",t.valid()},onFinishing:function(e,n){return t.validate().settings.ignore=":disabled",t.valid()},onFinished:function(e,n){$("#loanPopup .modal-content").addClass("success-content")}});document.getElementById("loanPopup").addEventListener("hidden.bs.modal",e=>{$("#loanPopup .modal-content").removeClass("success-content")}),$(".floorViewOption").change(function(){var e=$(this).attr("name"),e=$("input[name="+e+"]:checked").val();console.log(e),"3d"==e?($(this).closest(".image-container").find(".img-2d").addClass("d-none"),$(this).closest(".image-container").find(".img-3d").removeClass("d-none")):($(this).closest(".image-container").find(".img-2d").removeClass("d-none"),$(this).closest(".image-container").find(".img-3d").addClass("d-none"))});var r=new Swiper(".detailsMenuSwiper",{slidesPerView:"auto",spaceBetween:20}),n=($(".showAbout").on("click",()=>{$(".about-container>div").toggleClass("hide-text")}),$(".showFeatures").on("click",()=>{$(".features-container").toggleClass("show-less")}),$("#videos-nav-tab button").on("click",function(e,n){var i=$(this)[0];$("#videos-nav-tab button").each((e,n)=>{n!==i&&$(n).removeClass("active")})}),new Swiper(".payment-plan-swiper",{loop:!1,navigation:{nextEl:".payment-next",prevEl:".payment-prev"},slidesPerView:4,spaceBetween:10,breakpoints:{320:{slidesPerView:3.5},576:{slidesPerView:4.5},768:{slidesPerView:5},992:{slidesPerView:5}}}),new Swiper(".land-payment-plan-swiper",{loop:!0,navigation:{nextEl:".land-payment1-next",prevEl:".land-payment1-prev"},slidesPerView:4,spaceBetween:10,breakpoints:{320:{slidesPerView:3.5},576:{slidesPerView:4.5},768:{slidesPerView:5},992:{slidesPerView:5}}}),new Swiper(".land-payment-plan-swiper2",{loop:!0,navigation:{nextEl:".land-payment2-next",prevEl:".land-payment2-prev"},slidesPerView:4,spaceBetween:10,breakpoints:{320:{slidesPerView:3.5},576:{slidesPerView:4.5},768:{slidesPerView:5},992:{slidesPerView:5}}}),new Swiper(".land-payment-plan-swiper3",{loop:!0,navigation:{nextEl:".land-payment3-next",prevEl:".land-payment3-prev"},slidesPerView:4,spaceBetween:10,breakpoints:{320:{slidesPerView:3.5},576:{slidesPerView:4.5},768:{slidesPerView:5},992:{slidesPerView:5}}}),new Swiper(".videos-menu-swiper",{loop:!1,navigation:{nextEl:".video-prev",prevEl:".video-next"},slidesPerView:4,spaceBetween:10,breakpoints:{320:{slidesPerView:3.5},576:{slidesPerView:4.5},768:{slidesPerView:5},992:{slidesPerView:5}}}),new Swiper(".loan-swiper",{loop:!1,navigation:{nextEl:".loan-next",prevEl:".loan-prev"},slidesPerView:4,spaceBetween:10,breakpoints:{320:{slidesPerView:2.5},576:{slidesPerView:3.5},768:{slidesPerView:4.5},992:{slidesPerView:4.5}}}),new Swiper(".videos-menu-swiper",{loop:!1,slidesPerView:"auto",spaceBetween:10,navigation:{nextEl:".video-next",prevEl:".video-prev"}}),new Swiper(".other-project-swiper",{loop:!1,navigation:{nextEl:".other-project-next",prevEl:".other-project-prev"},slidesPerView:3,spaceBetween:10,breakpoints:{320:{slidesPerView:1.5},576:{slidesPerView:2.5},768:{slidesPerView:2.5},992:{slidesPerView:2.5},1200:{slidesPerView:3.5}}}),new Swiper(".mapview-swiper",{loop:!1,slidesPerView:4.5,navigation:{nextEl:".mapView-next",prevEl:".mapView-prev"},spaceBetween:10,breakpoints:{320:{slidesPerView:2.5},375:{slidesPerView:3.2},450:{slidesPerView:3.5},485:{slidesPerView:4.2},576:{slidesPerView:4.5},768:{slidesPerView:5.5},992:{slidesPerView:5.5},1200:{slidesPerView:6.5},1440:{slidesPerView:7.5}}}),new Swiper(".locality-swiper",{loop:!0,slidesPerView:"auto",navigation:{nextEl:".locality-next",prevEl:".locality-prev"},spaceBetween:15}),new Swiper(".land-highlight-swiper",{loop:!0,slidesPerView:"auto",navigation:{nextEl:".highlight-next",prevEl:".highlight-prev"},spaceBetween:15}),new Swiper(".banner-swiper",{loop:!1,navigation:{nextEl:".banner-next",prevEl:".banner-prev"},slidesPerView:1,spaceBetween:0,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:1}}}));document.querySelector("#bannerModal").addEventListener("show.bs.modal",function(e){console.log(e.relatedTarget);e=e.relatedTarget,e=$(e).data("index")||0;console.log("index",e),n.slideTo(e)});document.querySelector("#zoomModal").addEventListener("show.bs.modal",function(e){var n=e.relatedTarget;let t="";$(n).closest(".image-container").find(".floor-img").each((e,n)=>{var i=$(n).hasClass("d-none");i||(t=$(n).attr("src")),console.log("isHide==>",i)});n=$(e.target).find("img");$(n).attr("src",t)});var e=document.querySelector("#detailContactPhoneNo"),e=(window.intlTelInput(e,{initialCountry:"lk",allowDropdown:!0}),document.querySelector("#requestCallPhone")),e=(window.intlTelInput(e,{initialCountry:"lk",allowDropdown:!0}),document.querySelector("#initPhoneNo")),e=(window.intlTelInput(e,{initialCountry:"lk",allowDropdown:!0}),document.querySelector("#contactNo")),e=(window.intlTelInput(e,{initialCountry:"lk",allowDropdown:!0}),document.querySelector("#inqContact")),e=(window.intlTelInput(e,{initialCountry:"lk",allowDropdown:!0}),document.querySelector("#bannercontactNo")),i=(window.intlTelInput(e,{initialCountry:"lk",allowDropdown:!0}),new bootstrap.Modal(document.getElementById("DetailsPhoneNoModal"))),a=new bootstrap.Modal(document.getElementById("detailsPopup")),o=new bootstrap.Modal(document.getElementById("DetailsWhatsAppModal")),s=(document.getElementById("DetailsPhoneNoModal").addEventListener("hidden.bs.modal",e=>{$("body").css("overflow","auto")}),$("#btnShowPhone").on("click",function(){$("#detailsCallbackBtnClose").trigger("click"),setTimeout(()=>i.show(),0)}),$("#showSpecification").on("click",function(){$("#specContent").toggleClass("show-less")}),$("#showTeam").on("click",function(){$("#teamShowMoreContent").toggleClass("show-less")}),$("#showEnquireNum").on("click",function(){$(".phone-info").removeClass("hide"),$("#contactCard").removeClass("d-none"),$(this).hide(),$(".show-box").addClass("hide-show-box")}),0);function d(e){var o=$(document).scrollTop();const l=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),s=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);console.log("scrollPos==>",o),$(window).scrollTop()+$(window).height()==$(document).height()&&($(".detailsMenuSwiper a:not(.swiper-slide-duplicate)").length,$(".detailsMenuSwiper a").each(function(e,n){$(n).removeClass("active")}),$(".detailsMenuSwiper a:last-child").addClass("active")),$(".detailsMenuSwiper a").each(function(){var e,n=$(this),i=$(n.attr("href")),t=i.height(),a=i.position().top;576<=s?a-=l/4:a-=120,a<=o&&o<a+t&&(e=n.attr("aria-label").trim().split("/")[0])!=r.activeIndex&&(console.log(i,o,a,t),r.slideTo(e-1),$("a").removeClass("active"),n.addClass("active"))}),0==o&&$(".detailsMenuSwiper a:first-child").addClass("active")}$(window).scroll(function(e){var n=$(this).scrollTop();s<n||null===localStorage.getItem("popupShowed")&&(a.show(),window.localStorage.setItem("popupShowed",!0)),s=n}),d(),$(document).on("scroll",d),$("#propertyValueSlider").slider({range:!1,min:1e6,max:1e8,step:5e5,slide:function(e,n){$("#propertyValue").val(l.format(n.value).replace("LKR","")),m()}}),$("#propertyValue").on("change",function(){var e=$(this).val().replace(/,/g,""),n=$("#propertyValueSlider").slider("value");1e6<=e&&e<=1e8?($("#propertyValueSlider").slider("value",e),$("#propertyValue").val(l.format(e).replace("LKR",""))):$("#propertyValue").val(l.format(n).replace("LKR","")),m()}),$("#downPaymentSlider").slider({range:!1,min:20,max:100,step:5,slide:function(e,n){$("#downPayPer").text(n.value);n=$("#propertyValueSlider").slider("values",0)/100*n.value;$("#downPayment").val(l.format(n).replace("LKR","")),m()}}),$("#downPayment").on("change",function(){var e=$(this).val().replace(/,/g,""),n=$("#propertyValue").val().replace(/,/g,""),e=(e/n*100).toFixed(2),i=$("#downPaymentSlider").slider("value");20<=e&&e<=100?(console.log("new"),$("#downPaymentSlider").slider("value",e),$("#downPayPer").text(e)):(console.log("new old"),e=n/100*i,$("#downPayment").val(e),$("#downPayPer").text(i)),m()}),$("#interestRateSlider").slider({range:!1,min:5,max:30,step:.5,slide:function(e,n){$("#interestRate").val(n.value+"%"),m()}}),$("#interestRate").on("change",function(){var e=$(this).val().replace("%",""),n=$("#interestRateSlider").slider("value");5<=e&&e<=30?$("#interestRateSlider").slider("value",e):$("#interestRate").val(n+"%"),m()}),$("#loanPeriodSlider").slider({range:!1,min:1,max:30,step:1,slide:function(e,n){$("#loanPeriod").val(n.value+" years"),m()}}),$("#loanPeriod").on("change",function(){var e=$(this).val().replace(" years",""),n=$("#loanPeriodSlider").slider("value");1<=e&&e<=30?$("#loanPeriodSlider").slider("value",e):$("#loanPeriod").val(n),m()}),e=$("#propertyValueSlider").slider("value"),c=$("#downPaymentSlider").slider("value"),p=$("#interestRateSlider").slider("value"),w=$("#loanPeriodSlider").slider("value"),c*=e/100,$("#propertyValue").val(l.format(e).replace("LKR","")),$("#downPayment").val(l.format(c).replace("LKR","")),$("#interestRate").val(p+"%"),$("#loanPeriod").val(w+" years");var e=document.getElementById("loanChart").getContext("2d"),c=e.createLinearGradient(0,0,0,400),p=(c.addColorStop(0,"#B7D464"),c.addColorStop(1,"#009833"),{labels:["Loan amount ","Down Payment"],datasets:[{label:"My First Dataset",data:[300,200],backgroundColor:[c,"#E8E8E8"],hoverOffset:4}]});const u=new Chart(e,{type:"doughnut",data:p,options:{plugins:{htmlLegend:{containerID:"legendContainer"},legend:{display:!1}}}}),m=()=>{setTimeout(()=>{var e,n,i=$("#propertyValueSlider").slider("values",0),t=(console.log("propertyValue calc==>",i),$("#interestRateSlider").slider("values",0)),a=12*$("#loanPeriodSlider").slider("values",0),o=$("#downPaymentSlider").slider("values",0);console.log("downPaymentPersantage calc==>",o),i&&t&&a&&o&&(n=t/100/12,e=i/100*(100-o),i=i/100*o,o=Math.ceil(e*(n*(1+n)**a/((1+n)**a-1))),n=Math.ceil(o*a),$("#monthlyPayment").text(l.format(o).replace("LKR","Rs")),$(".boldText").text(l.format(o).replace("LKR","Rs")),$("#LoanAmount").text(l.format(Math.ceil(e.toFixed(2))).replace("LKR","Rs")),$("#interestRateValue").text(t),$("#totalInterest").text(l.format(Math.ceil(n-e.toFixed(2))).replace("LKR","Rs")),$("#totalPayment").text(l.format(n).replace("LKR","Rs")),$("#downPayment").val(i),a=$("#downPayment").val().replace(/,/g,""),o=a,t=e,u.data.datasets[0].data[0]=t,u.data.datasets[0].data[1]=o,u.update())},500)};m();var w=window["pdfjs-dist/build/pdf"],g=(w.GlobalWorkerOptions.workerSrc="//mozilla.github.io/pdf.js/build/pdf.worker.js",null),v=1,h=!1,y=null,f=1,P=document.getElementById("the-canvas"),b=(document.getElementById("broucher-pdf-container"),P.getContext("2d"));function S(e){h=!0,g.getPage(e).then(function(e){var n=e.getViewport({scale:f}),i=document.getElementById("broucher-pdf-container").offsetWidth,i=(P.height=400,P.width=i-32,{canvasContext:b,viewport:n});e.render(i).promise.then(function(){h=!1,null!==y&&(S(y),y=null)})});var n=e/g.numPages*100+"%";$("#brochureProgressBar").width(n),$("#pageNumbers").html(e+" / "+g.numPages)}function V(e){h?y=e:S(e)}document.getElementById("brochurePrev").addEventListener("click",function(){v<=1||V(--v)}),document.getElementById("brochureNext").addEventListener("click",function(){v>=g.numPages||V(++v)}),w.getDocument("./assets/pdf/sample.pdf").promise.then(function(e){g=e,S(v)});$(".bottomFloat .openPopUP").on("click",function(){setTimeout(()=>i.show(),0)}),$(".bottomFloat .openPopWhatsApp").on("click",function(){setTimeout(()=>o.show(),0)})});let map,service,infowindow,sydney;function initMap(){var e=$("#map").data("location").split(","),e=(sydney=new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1])),infowindow=new google.maps.InfoWindow,map=new google.maps.Map(document.getElementById("map"),{center:sydney,zoom:15}),new google.maps.Marker({position:sydney,map:map}),{location:sydney,radius:"500",type:["bus_station"]});(service=new google.maps.places.PlacesService(map)).nearbySearch(e,callback)}function callback(e,n){if(n==google.maps.places.PlacesServiceStatus.OK)for(var i=0;i<e.length;i++)createMarker(e[i])}function changeMarkerPlaces(e){clearOverlays();e={location:sydney,radius:"500",type:[e]};(service=new google.maps.places.PlacesService(map)).nearbySearch(e,callback)}$(".mapview-swiper .swiper-slide").on("click",function(){changeMarkerPlaces($(this).data("place")),$(".mapview-swiper .swiper-slide").each(function(){$(this).removeClass("active")}),$(this).addClass("active")});let markers=[];function createMarker(e){if(e.geometry&&e.geometry.location){console.log(e);var n=()=>"bus_station"==e.types[0]?"assets/img/details/mapview/locationiconspin/Bus-stops-02.png":"bank"==e.types[0]?"assets/img/details/mapview/locationiconspin/Bank.png":"movie_theater"==e.types[0]?"assets/img/details/mapview/locationiconspin/Cinemas-02.png":e.types.includes("restaurant")?"assets/img/details/mapview/locationiconspin/Restaurant-02.png":"supermarket"==e.types[0]?"assets/img/details/mapview/locationiconspin/Shopping-02.png":"hospital"==e.types[0]?"assets/img/details/mapview/locationiconspin/Hospital-02.png":"shopping_mall"==e.types[0]?"assets/img/details/mapview/locationiconspin/Shopping-02.png":"park"==e.types[0]?"assets/img/details/mapview/locationiconspin/Parks-02.png":"gas_station"==e.types[0]?"assets/img/details/mapview/locationiconspin/Fuel-station-02.png":"police"==e.types[0]?"assets/img/details/mapview/locationiconspin/Police-station-03.png":"";console.log("get==>",n());const i=new google.maps.Marker({map:map,position:e.geometry.location,icon:n()});i.addListener("mouseover",function(){try{infowindow.setContent(e.name||""),infowindow.open({anchor:i,map:map,shouldFocus:!1})}catch(e){console.log("create Info error ==>")}}),google.maps.event.addListener(i,"click",()=>{try{infowindow.setContent(e.name||""),infowindow.open({anchor:i,map:map,shouldFocus:!1})}catch(e){console.log("create Info error ==>")}}),markers.push(i)}}function clearOverlays(){if(markers)for(i in markers)markers[i].setMap(null)}window.initMap=initMap;